# Module 3.1.2: 基本を理解する

**Claude Code用ティーチングスクリプト**

---

## ティーチングフロー

おかえりなさい！3.1.1では最初の画像を生成しました - かなり魔法みたいでしたよね？

それでは、裏側で実際に何が起こっているのか理解していきましょう。

STOP: 舞台裏を覗いてみる準備はできましたか？

USER: はい / 準備できました

---

あの画像を生成するとき、私はあなたの代わりにGoogleのGemini APIを呼び出していました。

Gemini 3 Pro（コードネーム「Nano Banana Pro」）は、現在利用可能な最も強力な画像生成モデルの1つです。

APIを直接使う（Googleの消費者向けアプリを使うのではなく）ことの素晴らしい点は、少し自由度が高いことです。たとえば、実在の有名人を参照画像として使えます - 消費者向けアプリではブロックされる機能です。

そして、私があなたのクリエイティブパートナーになります。APIコール、セッション管理、ファイル保存など、すべての技術的な部分を私が処理し、あなたはクリエイティブなビジョンに集中できます。

STOP: ここまで理解できましたか？

USER: はい

---

APIの魔法はすべて、事前に構築されたスクリプト `image_gen.py` に入っています。

ACTION: `image_gen.py` を読んで、`generate()` の主要な関数シグネチャを表示する

コントロールできるパラメータはこちらです：

- **prompt** - 作成したいもののテキスト説明
- **reference\_images** - ビジュアル入力として使う写真（3.1.3で詳しく説明します）
- **aspect\_ratio** - 画像の形（1:1正方形、16:9横長、9:16縦長など）
- **resolution** - サイズ/品質（1K、2K、または4K）

ただし、これらについて心配する必要はありません。自然に私とやり取りするだけで、APIコール、パラメータ、ファイル保存を自動的に処理します。

試してみましょう。作りたい画像を何でも説明してください。

具体的に - 被写体、設定、照明、雰囲気を含めてください。このモデルは信じられないほど優秀なので、想像力を思いっきり広げてください。

STOP: 何を生成したいですか？

USER: [作りたい画像の説明]

ACTION: まず new_session() を呼んで前のセッションをクリアする（ユーザーが3.1.1から続けている場合に備えて）。次に、ユーザーの説明を使って画像を生成する。ユーザーが別のものを指定しない限り、aspect_ratio="1:1"、resolution="1K" を使用する。

[生成された画像について楽しい/熱意のあるコメントをする]

画像が `outputs/` フォルダに保存されました。

STOP: `outputs/` フォルダをファイルエクスプローラーで開いて確認してください。どう思いますか？

USER: [感想を述べる]

---

ここからが強力なポイントです：完璧でなくても最初からやり直す必要はありません。

私は会話を覚えているので、変更を依頼するだけで大丈夫です。これを「イテレーション」と呼びます - 画像を段階的に改善していく方法です。

さらに良いことに：私はNano Bananaとのセッションを継続しているので、モデルは以前のすべての思考を持っています。これにより、編集時にはるかに良い結果が得られます - モデルがあなたの達成しようとしていることの全体的なコンテキストを理解しているからです。

STOP: 画像の中で1つ変えたいところを教えてください。いくつかアイデアを提案しますね。

USER: [変更したいことの説明]

ACTION: フィードバックに基づいて改良版を生成する（既存のセッションを継続）

`outputs/` フォルダを確認してください - 新しいバージョンがあります。

STOP: 良くなりましたか？他に調整したいですか？それとも先に進みましょうか？

USER: [回答]

---

いいですね！次はアスペクト比について話しましょう - 画像の形のことです。

一般的なオプションはこちらです：

- **1:1** - 正方形（Instagram投稿、プロフィール画像）
- **16:9** - 横長（プレゼンテーション、YouTubeサムネイル、デスクトップ壁紙）
- **9:16** - 縦長（Instagram/TikTokストーリー、スマホ壁紙）
- **4:5** - 縦長の長方形（Instagramフィード投稿 - 正方形より見栄えが良い）
- **3:2** - クラシックな写真比率（35mmフィルムに近い）

STOP: クイズです - プレゼンテーションスライドにはどの比率を使いますか？

USER: [回答]

[回答に応じて対応する。16:9またはランドスケープと答えた場合：「正解です！画像を使う場所に合った形を選ぶのが大切です。」間違った場合は、やさしく訂正してプレゼンテーションに16:9が適している理由を説明する。]

---

次はレゾリューション（解像度）について話しましょう - 画像の大きさと詳細度です。

3つのオプションがあります：

- **1K**（1024px）：最速の生成、約20秒。イテレーションやドラフトに最適。
- **2K**（2048px）：やや遅め、約30秒。コストは1Kと同じ。最終出力に適しています。
- **4K**（4096px）：最も遅い、約45秒。コストが高い。印刷品質が必要な場合のみ。

このコースでは、素早くイテレーションできるように1Kをデフォルトにしています。クリエイティブな出力の品質に違いはありません - 解像度が違うだけです。

結果に満足したら、2Kで再生成して洗練された最終版にできます。4Kは、大判で物理的に印刷する必要がある場合にのみ必要です。

STOP: 理解できましたか？

USER: はい

---

今回学んだことのまとめ：

- Gemini APIが画像生成を担っています（`image_gen.py` 経由）
- アスペクト比とレゾリューションをコントロールできます
- イテレーションが重要 - 最初からやり直すのではなく、段階的に改善する
- ドラフトには1K、最終版には2Kを使う

次のレッスンでは、**プロンプトのゴールデンルール** - 素晴らしい結果を得るためのプロンプトの書き方 - と、一貫したスタイルのための参照画像の使い方を学びます。

STOP: 3.1.3に進む準備はできましたか？

USER: はい / 準備できました

準備ができたら `/start-3-1-3` を実行してください。

ACTION: End module

---

## Claudeへの重要な注意事項

**画像生成について：**
- `image_gen.py` の `generate()` 関数を使用する
- ユーザーが指定しない限り、aspect_ratio="1:1" と resolution="1K" をデフォルトにする
- 出力は自動的に `outputs/` に保存される
- イテレーション時はセッションが自動的に継続される - `new_session()` を呼ばないこと

**関数シグネチャの表示について：**
- `image_gen.py` の `generate()` 関数定義を表示する
- パラメータに焦点を当てる：prompt、reference_images、aspect_ratio、resolution
- ファイル全体を表示しない - 関連する関数のみ

**問題が発生した場合：**
- APIキーエラー：3.1.1で設定した `.env` ファイルを確認してもらう
- 生成失敗：エラーメッセージを確認し、適切にトラブルシューティング
- セッションの問題：必要に応じて `new_session()` を呼んでリセットできる

**ターミナルの制限事項：**
- 画像を直接表示できない - 常に `outputs/` フォルダを開くよう案内する
- 生成された画像を見るにはFinder（Mac）またはファイルエクスプローラー（Windows）を使用

**画像を開く：** ユーザーが画像を見つけるのに困っている場合、`open [path]`（Mac）または `start [path]`（Windows）で開くことを提案する。

---

## 成功基準

Module 3.1.2が成功したと言えるのは、学習者が：

- Gemini APIが画像生成を担っていることを理解した
- 自分の選んだ画像を少なくとも1枚生成した
- 画像のイテレーションに成功した（少なくとも1回編集した）
- アスペクト比と使い分けを理解した
- レゾリューションのオプションを理解した（ドラフトは1K、最終版は2K）
- 次のレッスンへの進み方を知っている
