# 4.3 ビルド＆イテレーション

いよいよです。クイズをビルドしましょう。

技術的なセットアップは全て私が担当します。あなたは魔法が起きるのを見ていてください。

STOP: 準備はいいですか？

USER: はい

---

まず、プロジェクト構造をセットアップします - 必要なスターターファイルを全て作成します。

ACTION: quiz-projectフォルダで以下のコマンドを実行：
```
npx create-next-app@latest . --typescript --tailwind --eslint --app --no-src-dir --import-alias "@/*" --yes
```
（--yesフラグで全てのデフォルト設定を自動的に受け入れます）

完了です！ファイルエクスプローラーを見てください - quiz-projectフォルダに新しいファイルがたくさんできているはずです。

全部を理解する必要はありません。`app/`フォルダがクイズの本体が置かれる場所です。それ以外は設定ファイルです。

STOP: 新しいファイルが見えますか？

USER: はい

---

ビルドする前に、便利な機能を紹介させてください：プランモードです。

大きなタスクの場合、実行する前に何をするかを確認できると便利です。**Shift+Tab**を押してモードを切り替えてください - "Plan mode"というオプションが見えるはずです。

STOP: プランモードに切り替えて、できたら教えてください。

USER: プランモードになりました

完璧です。プランモードでは、私がプランを見せて、あなたが承認してから、私が実行します。やってみましょう。

STOP: 要件に基づいてクイズをビルドするように私に依頼してください。

USER: REQUIREMENTS.mdに基づいてクイズをビルドして

ACTION: REQUIREMENTS.mdを読んでから、以下を示すプランを作成：
- 作成するコンポーネント（クイズページ、質問コンポーネント、結果ページ）
- 選択したスタイルに基づくスタイリングアプローチ
- クイズロジックの実装（回答が結果にどうマッピングされるか）
- 含める画像/アイコン

プランを箇条書きで分かりやすく提示。

これがプランです。クイズページ、質問コンポーネント、結果ページを作成し、あなたの好みに合わせて全てスタイリングします。

STOP: これで合っていますか？始める前に質問はありますか？

USER: いいですね / [質問]

ACTION: 質問があれば答えてから、通常モードに戻すよう伝える（Shift+Tab）、その後プランを実行。

---

ビルドしています。1〜2分かかります。ファイルを作成・編集しているのが見えるでしょう。そのまま任せてください。

ACTION: REQUIREMENTS.mdに基づいてクイズアプリケーション全体をビルド：
1. app/page.tsxにメインクイズページを作成
2. クイズコンポーネントを作成（QuizQuestion、Resultsなど）
3. クイズロジックを実装（回答の追跡、結果の計算）
4. 選択したビジュアルスタイルを適用
5. 好みに基づいて画像/アイコンを追加
6. 結果表示が選択に合っているか確認（単一結果 vs パーセンテージ）

時間をかけてしっかりビルドすること。これがコアの成果物。

完了です！クイズがビルドされました。実際に動かしてみましょう。

---

クイズを起動して、ブラウザで開きます。

ACTION: quiz-projectフォルダで`npm run dev`をバックグラウンドで実行

ACTION: サーバーが起動するまで数秒待ってから、bashでhttp://localhost:3000をブラウザで開く

ブラウザでクイズが開いているはずです！

この"localhost"リンクはあなたのコンピュータでのみ動作します - 一時的なローカルバージョンです。後でデプロイするときに公開します。

STOP: クイズが見えますか？

USER: はい！ / [問題あり]

ACTION: 問題がある場合：
- ブラウザが開かない → http://localhost:3000に手動でアクセスするよう伝える
- ビルドエラー → ターミナル出力を確認してエラーを修正
- 空白ページ → ブラウザコンソールでJavaScriptエラーを確認

---

見てください！動くクイズができましたね！

実際にやってみましょう - 質問に答えて結果を見てみてください。

STOP: クイズを試してください。動きますか？最後に結果が表示されますか？

USER: 動きました！ / [何かおかしい]

ACTION: 何かおかしい場合は一緒にデバッグ。よくある問題：
- 結果が表示されない → ロジックの実装を確認
- 性格マッピングが間違っている → 回答のマッピングを確認
- スタイルの問題 → イテレーションで修正可能

これは普通のことです - 最初のバージョンは修正が必要なことが多いです。まず動くようにして、それから磨きましょう。

すごい！あなたはたった今ウェブアプリをビルドしました。ちょっと実感してみてください。

---

最初のバージョンは完璧ではありません。イテレーションしましょう - 気に入るまで2〜3回変更します。

コツを教えます：スクリーンショットを撮って、ここに**Ctrl+V**（Macの場合もCmd+Vではなく！）でペーストして、何を変えたいか教えてください。

丸で囲んだり、指差したり、何でも構いません - 何を変えてほしいか見せてください。

これはバグを見せるのにも最適な方法です。何かおかしく見えたら、スクリーンショットを撮ってここにペーストしてください。

何を変えるか迷ったら、こんなアイデアはどうですか：
- 結果表示時に紙吹雪やアニメーションを追加
- 色やフォントを変更
- 質問や結果の文言を調整
- 各結果に画像を追加
- レイアウトや余白を変更
- プログレスバーを追加

STOP: クイズのスクリーンショットを撮って、Ctrl+Vでペーストして、何を変えたいか教えてください。

USER: [スクリーンショットをペーストして変更を説明]

ACTION: リクエストされた変更をコードに適用

完了です！ブラウザを更新して変更を確認してください。

STOP: いかがですか？他に変えたいところはありますか？

USER: [さらに変更 / 満足]

ACTION: 満足するまでイテレーションを続ける。2〜3回が一般的。よくあるリクエスト：
- ビジュアルの調整（色、余白、フォント）
- アニメーションの追加
- 文言の変更
- レイアウトの調整

---

見てください - あなただけのクイズが、思い通りの形になりました。

これがイテレーションのループです：スクリーンショット → 説明 → 変更 → 更新 → 繰り返し。

これが本当のプロダクト開発の進め方です。そしてAIを使えば、各イテレーションが数日ではなく数秒で済みます。

STOP: 見た目に満足していますか？

USER: はい

---

**今学んだこと：** 要件から動くプロダクトに辿り着き、思い通りになるまでイテレーションする方法。

**他にも活用できる場面：**
- あらゆるウェブプロジェクトのビルド - ランディングページ、ツール、プロトタイプ
- 本格的な開発に投資する前にアイデアを素早くテスト
- デザイナー/開発者との協業 - 明確なビジュアルフィードバックが全てをスピードアップ

**次のステップ：** 4.4では、コードをGitHubに保存します。今のところコードはあなたのコンピュータにしか存在しません。クラウドに保存して、バックアップとデプロイの準備をしましょう。

STOP: 作業を保存する準備はできましたか？「GitHubやろう」と言うか、/start-4-4と入力してください

USER: GitHubやろう

---

## Important Notes for Claude

- `npm run dev`コマンドはバックグラウンドで実行し、ユーザーが会話を続けられるようにする
- localhost:3000はNext.jsのデフォルトポート - 既に使用中の場合、Next.jsが別のポートを提案する
- スクリーンショットをペーストされたら、実際に見て具体的な変更を行う
- Ctrl+Vの注意はMacユーザーにとって重要 - 最初にCmd+Vを試しがち
- イテレーションは集中して行う - 一度に多くの変更を提案しない
- クイズにバグがある場合、ビジュアルの磨きより先に修正する
- プランモード（Shift+Tab）はClaude Codeの実際の機能 - 実際に使わせること

## Success Criteria

- Next.jsプロジェクトがquiz-projectフォルダにスキャフォールドされている
- クイズがREQUIREMENTS.mdに基づいて完全にビルドされている
- 開発サーバーが起動し、localhost:3000でクイズが表示できる
- ユーザーが少なくとも1〜2回イテレーションしている
- ユーザーがクイズの見た目に満足している
- ユーザーがGitHubの準備ができている
