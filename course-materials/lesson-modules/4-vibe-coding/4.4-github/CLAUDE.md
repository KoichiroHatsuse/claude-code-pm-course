# 4.4 GitHub

今のところ、クイズはあなたのコンピュータにしか存在しません。

もしノートパソコンが壊れたりファイルを削除したら、全てなくなります。それにまだインターネットに公開することもできません。

まずクラウドに保存する必要があります。それがGitHubの役割です。

STOP: GitHubを使ったことはありますか？

USER: はい / いいえ / 少しだけ

---

GitHubは、コード版のGoogleドライブのようなものです。

コードをクラウドに保存し、全ての変更履歴を残し、ミスを元に戻すことができます。

クイズをインターネットに公開するためにも必要です - 使うサービスがどこかからコードを取得する必要があるからです。

GitHub上のプロジェクトのことを「リポジトリ」（略して「リポ」）と呼びます。開発者がよく使う言葉です。

STOP: わかりましたか？

USER: はい

---

まず、GitHubアカウントが必要です。

STOP: GitHubアカウントはお持ちですか？お持ちでなければ、サインアップページを開きましょうか？

USER: 持ってます / 開いてください / 自分でやります

ACTION: 開いてほしい場合は実行: `open https://github.com`（Macではbash open）

STOP: アカウントの準備ができて、続行する準備ができたら教えてください。

USER: 準備できました

---

それでは、あなたのGitHubアカウントに接続して、コードを保存できるようにします。

GitHubと直接やりとりできるツールをダウンロードします - あなたが難しいコマンドを入力する必要はありません。

ブラウザが開いてログインを求められるかもしれません - 画面の指示に従って、終わったら戻ってきてください。

ACTION: GitHub CLIをセットアップ：

1. インストール済みか確認：
```
gh --version
```

2. インストールされていない場合：
   - Macの場合: `brew install gh`
   - brewが失敗した場合やMac以外の場合: https://cli.github.com にアクセスして手動でダウンロードするよう伝え、完了後に戻ってくるよう案内

3. インストールできたら、認証（ブロックを避けるためバックグラウンドで実行）：
```bash
gh auth login --web --git-protocol https > /tmp/gh-auth.log 2>&1 &
sleep 2
cat /tmp/gh-auth.log
```

4. 出力を読んでワンタイムコードを取得し、デバイス認証ページを開く：
```bash
open https://github.com/login/device
```

5. ユーザーに伝える: 「ブラウザでページを開きました。このコードを入力してください: [出力からのコード]。Authorizeをクリックして、終わったら教えてください。」

STOP: 認証が完了したら教えてください。

USER: できました

ACTION: 認証が成功したか確認：
```bash
gh auth status
```

成功していれば続行。認証されていない場合はトラブルシューティング：
- ブラウザの手順を完了していない可能性 - もう一度試すよう依頼
- バックグラウンドプロセスがタイムアウトした可能性 - 認証コマンドを再実行

---

それでは、コードをGitHubに保存しましょう。デフォルトでプライベートにするので、あなただけが見ることができます。

ACTION: 以下のコマンドを順番に実行：

1. quiz-projectフォルダに移動：
```
cd [quiz-projectへのパス]
```

2. gitを初期化（まだの場合）：
```
git init
```

3. 全ファイルを追加：
```
git add .
```

4. 最初のコミットを作成：
```
git commit -m "Initial commit - coffee personality quiz"
```

5. GitHubリポジトリを作成してプッシュ：
```
gh repo create quiz-project --private --source=. --push
```

完了です！コードがGitHubに保存されました。開発者はこれを「プッシュ」と呼びます - コードをクラウドに押し上げるイメージです。

ブラウザで確認できるように開きましょう。

ACTION: リポジトリのURLを取得して開く：
```
gh repo view --web
```
（ブラウザでGitHubリポジトリが開きます）

STOP: GitHubであなたのプロジェクトが見えますか？

USER: はい！

---

クイズがバックアップされ、公開の準備が整いました。

今後、作業を保存したいときは、「GitHubにプッシュして」と頼むだけで、最新の変更を保存します。

GitHubにはまだまだたくさんの機能があります - コラボレーション、バージョン履歴、ブランチなど - 将来のモジュールで詳しく扱います。でも今重要なのは、コードがインターネットに公開するためにアクセスできる場所に保存されたということです。

まさにそれを次にやります。

**次のステップ：** 4.5では、クイズをインターネットに公開します！GitHubをVercelというサービスに接続して、誰とでも共有できる本物のURLを取得します。これがゴールラインです。

STOP: 公開する準備はできましたか？「やろう」と言うか、/start-4-5と入力してください

USER: やろう

---

## Important Notes for Claude

- GitHub CLI (gh)が認証を扱う最も簡単な方法 - SSHキーのセットアップは求めない
- `--private`フラグは重要 - ユーザーはデフォルトでクイズコードを公開したくない
- quiz-projectという名前のリポジトリが既にある場合、ghがエラーを出す - 別の名前を選ぶのを手伝う
- `gh repo view --web`コマンドはURLを手動で構築するよりずっとクリーン
- brewが使えない場合、cli.github.comに全プラットフォーム用のインストーラーがある
- Next.jsプロジェクトには既に.gitignoreがあるのでnode_modulesはコミットされない

## Success Criteria

- ユーザーがGitHubアカウントを持っている
- GitHub CLIがインストールされ認証されている
- コードがコミットされプライベートGitHubリポジトリにプッシュされている
- ユーザーがgithub.comで自分のリポジトリを確認できる
- ユーザーが将来の変更を保存するために「GitHubにプッシュして」と頼めばよいことを理解している
