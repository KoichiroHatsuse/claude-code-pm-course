# 4.2 プラン

ビルドする前に、何をビルドするのかを明確にする必要があります。

これを「要件定義」と呼びます - 基本的には、クイズがどう動き、どう見えるべきかの説明です。

STOP: 誰かに曖昧な指示を出して、期待と全然違うものが返ってきた経験はありますか？

USER: はい / ありますね

---

要件定義をスキップするとそうなります。今のうちに詳細を詰めれば詰めるほど、あなたが本当に欲しいものを私がうまく作れます。

あなたのクイズについてインタビューしていきます。パーソナリティとコーヒーの組み合わせ、スタイル、質問を決めていきましょう。その後、すべてファイルに保存して、ビルドするための明確なスペックを作ります。

STOP: これは業者に仕事を発注する前のブリーフィングのようなものです。ブリーフが明確であればあるほど、結果が良くなります。始める準備はできましたか？

USER: はい

---

AskUserQuestion というツールを使います - タイピングの代わりにボタンで選べるようになります。よりスッキリした形で意思決定したいときは、いつでも「聞いて」や「選択肢を出して」と言ってください。

試してみましょう。

ACTION: AskUserQuestion を2つの質問で使用する：
- Q1 Header: "結果" / Question: "クイズのパーソナリティ/コーヒーの組み合わせはいくつにしますか？" / Options: "3 - シンプルで集中型", "4 - ちょうどいいバリエーション（おすすめ）", "5 - より細かい区別", "6 - 最大のバリエーション"
- Q2 Header: "質問の雰囲気" / Question: "どんなスタイルの質問がいいですか？" / Options: "楽しいポップカルチャー（ハリーポッター、Netflixなど）", "ライフスタイル＆好み（旅行、食べ物、週末）", "抽象的＆ユニーク（色、シナリオ、仮説）", "全部ミックス"

USER: [選択肢を選ぶ]

いい選択ですね！では、実際のパーソナリティとコーヒーの組み合わせを決めましょう。

---

覚えておいてください：このクイズはパーソナリティに基づいてコーヒーをおすすめします。つまり、どのパーソナリティがどのドリンクに対応するかを決める必要があります。

10個の組み合わせアイデアを用意しました。先ほど選んだ結果数に応じて [X] 個選んでください。「1, 4, 7」のように番号を入力してください：

1. **大胆な冒険家** → ダブルエスプレッソ - 「刺激を求めて生きる」
2. **コージークラシック** → ミディアムローストドリップ - 「一杯ごとの安らぎ」
3. **スイートエンスージアスト** → キャラメルラテ - 「苦いだけの人生なんてもったいない」
4. **禅ミニマリスト** → ブラックコーヒー、シングルオリジン - 「シンプル。クリーン。パーフェクト。」
5. **ソーシャルバタフライ** → カプチーノ - 「コーヒーは誰かと一緒がいい」
6. **ナイトオウル** → レッドアイ（コーヒー＋エスプレッソショット） - 「睡眠はオプション」
7. **ヘルシー志向** → オーツミルクアメリカーノ - 「一口ごとにウェルネス」
8. **こだわりのアルチザン** → プアオーバー、シングルオリジン - 「自分の好みを知っている」
9. **実用主義プラグマティスト** → ラージドリップ、できたてなら何でも - 「とにかく動けばいい」
10. **ご褒美インダルジェント** → モカ with ホイップ - 「コーヒーはデザート」

STOP: 欲しい番号を入力してください（例：「1, 3, 5, 8」）

USER: [番号を入力]

ACTION: 選択内容を REQUIREMENTS.md 用に記録する

---

完璧です！次に「ロジック」を決める必要があります。

ロジックとは、何かがどう動くかの裏側のルールです。ユーザーがXをしたら何が起こる？これをクリックしたら何が表示される？プロダクトの「もしこれなら、あれ」です。

すべてのアプリ、ウェブサイト、ツールにはロジックがあります。何かを企画するときは、実際にどう動くべきかを常に考える必要があります。私がオプションのブレインストーミングをお手伝いします。

このクイズの仕組みはこうです：各質問には回答があり、各回答はあなたのパーソナリティの1つに対応します。最後に、どのパーソナリティが最も多く選ばれたかを集計します。

問題は：結果をどう表示するか？2つのオプションがあります：

**オプション A: 単一のおすすめ** - 「あなたは大胆な冒険家！ダブルエスプレッソを試してみて。」

**オプション B: パーセンテージを全表示** - 「あなたは50%大胆な冒険家、30%コージークラシック、20%スイートエンスージアスト」とすべてのコーヒーおすすめ付き。

STOP: どちらが好みですか - 単一のおすすめ（A）かパーセンテージ表示（B）か？

USER: [AまたはBで回答]

ACTION: 選択内容を REQUIREMENTS.md 用に記録する

いい選択ですね！つまり、誰かの回答が「大胆な冒険家」3回、「コージークラシック」2回に対応した場合：

[Aを選んだ場合]：「あなたは大胆な冒険家！あなたのコーヒー：ダブルエスプレッソ。」と表示されます。

[Bを選んだ場合]：すべての結果がパーセンテージ付きで表示され、すべてのコーヒーおすすめを見ることができます。

質問は、どのパーソナリティが最もフィットするかを明らかにするだけです。

STOP: わかりましたか？

USER: はい

---

次は楽しいパート - どんな見た目にするか？

いくつかの異なるビジュアルスタイルのプレビューページを生成して、ブラウザで開きます。

STOP: スタイルオプションを見る準備はできましたか？

USER: はい

ACTION: 3〜4つの異なるビジュアルスタイルのHTMLプレビューファイルを生成する：
- スタイル1: ポップ/カラフル（明るい色、丸みのある形、楽しいフォント）
- スタイル2: ミニマル/クリーン（余白たっぷり、シンプルなタイポグラフィ）
- スタイル3: ボールド/ドラマチック（ダークな背景、ハイコントラスト、力強いタイポグラフィ）
- スタイル4: ウォーム/コージー（アースカラー、柔らかいグラデーション、温かみのある雰囲気）

各プレビューには、質問と回答オプション付きのサンプルクイズカードを表示する。quiz-project フォルダに style-preview-1.html、style-preview-2.html などとして保存する。

ACTION: bash の open コマンドを使ってすべてのプレビューファイルをブラウザで開く

ブラウザでプレビューを確認してください。各タブが異なるスタイルです。

STOP: どのスタイルが好きですか？1つ選んでもいいし、ミックスしたいところを教えてくれてもOKです - 例えば「#2の色合いが好きだけど、レイアウトは#3がいい」など

USER: [好みを回答]

ACTION: スタイルの好みを記録する。要素をミックスしたい場合は、具体的に何を組み合わせたいか確認する。

---

もう1つビジュアルの質問です：クイズに画像を入れたいですか？

各コーヒー結果に写真をつけることができます - 例えば「大胆な冒険家」にはエスプレッソの写真。

ウェブで検索して画像をダウンロードできます - ただし、検索して良い画像を見つけてダウンロードするので、少し時間がかかります。

あるいは、今は画像をスキップして、クイズが動いてから後で追加することもできます。

STOP: どちらが好みですか - 画像あり（時間がかかる）かスキップして後で？

USER: [回答]

ACTION: 選択に基づいて：

画像ありの場合：
- 各結果にどんな画像が欲しいか聞く（例：「エスプレッソショット」、「コージーラテ」、「アイスコーヒー」）
- 各画像について：
  1. ウェブ検索で画像を探す（例：「espresso shot unsplash」）
  2. 結果ページを取得してダイレクト画像URLを見つける
  3. curl を使って quiz-project の public/ フォルダにダウンロード
- 注：Unsplash はストックフォトに最適です（無料、高品質）。

スキップの場合：
- 先に進む - イテレーション時にいつでも画像を追加可能

---

あともう1つ：各回答オプションの横にアイコンは欲しいですか？「グリフィンドール」の横に剣のアイコンとか、「暗視」に月のアイコンとか。

アイコンがあるとクイズがより洗練されたビジュアルになりますが、よりクリーンな見た目が好みならテキストのみでもOKです。

STOP: アイコンあり？なし？

USER: [回答]

ACTION: 選択内容を REQUIREMENTS.md 用に記録する

---

最後のパート - 実際にユーザーが答える質問です。

あなたは先ほど「[先ほどの雰囲気の選択]」スタイルの質問を選んだので、その雰囲気に合った5〜7問を生成します。各質問には、あなたの異なるパーソナリティに対応する回答があります。

もちろん、自分で質問を考えることもできます - 欲しいものを教えてくれれば実現します。

ACTION: 選択した雰囲気に合わせて5〜7問のクイズ質問を生成する：
- 「楽しいポップカルチャー」の場合：ハリーポッターの寮、Netflix番組、架空のキャラクター、映画ジャンルなど
- 「ライフスタイル＆好み」の場合：週末の過ごし方、旅行スタイル、食の好み、社交の好みなど
- 「抽象的＆ユニーク」の場合：色、仮説的なシナリオ、ランダムなオブジェクト、無人島の選択など
- 「全部ミックス」の場合：各カテゴリから2〜3問

各質問には、選択したパーソナリティに明確に対応する回答を持たせる。例えば「大胆な冒険家」と「コージークラシック」を選んでいる場合、回答は刺激 vs. 安らぎの方向に寄せる。

提案を用意しました。見てください - 各回答はあなたのパーソナリティの1つに対応するよう設計されています。

STOP: いかがですか？このままでOK、変更したい、それとも自分で書きたいですか？

USER: [承認または変更を提案]

ACTION: フィードバックに基づいて質問を調整する。自分で書きたい場合は、回答とパーソナリティの対応づけを手伝う。

---

完璧です！必要なものがすべて揃いました。これをすべて要件ファイルに保存しましょう。

ACTION: quiz-project フォルダに REQUIREMENTS.md を作成する。内容：
- パーソナリティ→コーヒーの組み合わせ（選択したすべてとタグライン）
- 結果表示スタイル（単一かパーセンテージか）
- ビジュアルスタイルの説明
- 画像/アイコンの決定
- すべてのクイズ質問と回答→パーソナリティの対応づけ

できました！REQUIREMENTS.md を開いて確認してください。これが私がビルドする際のスペックです。

STOP: すべて正しいですか？

USER: はい / [修正点]

ACTION: 必要に応じて修正する

---

**今学んだこと：** ビルドする前に明確な要件を定義する方法 - 特にレコメンデーションエンジンの場合。

**他にどこで使えるか：**
- デザイナーやデベロッパーに任意のプロジェクトをブリーフィングするとき
- プロダクトスペックや PRD を書くとき
- 任意のクリエイティブプロジェクトを企画するとき - ビジョンが明確であれば結果が良くなります
- AI ツールと連携するとき - 具体的であればあるほど、アウトプットが良くなります

**次回：** 4.3 では、実際にこれをビルドします。あなたのクイズをこの要件に基づいてゼロから作るのを見届けてください。ここからが魔法の始まりです。

STOP: 4.3 の準備はできましたか？「作りましょう」と言うか、/start-4-3 と入力してください

USER: 作りましょう

---

## Important Notes for Claude

- AskUserQuestion ツールは最初のバッチ質問にのみ使用する - その後は通常の会話を使用する
- スタイルプレビューを生成する際は、実際に視覚的に区別できるものにする - 少しだけ色を変えるのではなく
- 画像について：Unsplash はストックフォトに最適だが、ダウンロード前にURLが実際に画像を返すか常に確認する
- REQUIREMENTS.md ファイルは極めて重要 - 4.3 のスペックになる。完全で明確であることを確認する
- ユーザーがスタイルをミックスしたい場合、各スタイルのどの要素を組み合わせたいか具体的に確認する
- 組み合わせ数に基づいて質問数を調整する（組み合わせが多い = 区別するためにより多くの質問が必要）

## Success Criteria

- ユーザーがパーソナリティ→コーヒーの組み合わせを選択した
- ユーザーが結果表示スタイルを選択した（単一 vs パーセンテージ）
- ユーザーがビジュアルスタイルを選択した
- ユーザーが画像/アイコン/スキップについて決定した
- ユーザーがクイズ質問を承認した
- REQUIREMENTS.md に上記すべてが記録されている
- ユーザーがビルドを楽しみにしている
